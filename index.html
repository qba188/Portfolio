<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Jakub Sobczyński Portfolio</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css'>
  <link rel="stylesheet" href="css/style.css">

  <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/demo.css" />
	<link rel="stylesheet" type="text/css" href="css/component.css" />
  
  
</head>

<body>
  <div class="page">
    <nav class="nav">
      <!--close button-->
      <div class="nav__close"></div>
      <ul class="nav__list">
        <li class="nav__item">
          <a class="nav__link" href="#" title="Home"><i class="nav__link-icon material-icons">home</i>Home</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="#" title="About"><i class="nav__link-icon material-icons">equalizer</i>About</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="#" title="Tour"><i class="nav__link-icon material-icons">business_center</i>Tour</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="#" title="Settings"><i class="nav__link-icon material-icons">settings</i>Settings</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="#" title="Plans"><i class="nav__link-icon material-icons">grade</i>Plans</a>
        </li>
        <li class="nav__item">
          <a class="nav__link" href="#" title="Log In"><i class="nav__link-icon material-icons">perm_identity</i>Log In</a>
        </li>
      </ul>
    </nav>
    <div>
        <section class="page__content demo-1">
            <div class="slices"></div>
            <div class="slides">
              <div class="slide grid slide--current" id="slide-1" data-image-even='img/1_1.jpg' data-image-odd='img/1_2.jpg'>
                <div class="grid__item">Jakub</div>
                <div class="grid__item grid__item--deco-1">Sobczyński</div>
                <div class="grid__item">FrontEnd</div>
                <div class="grid__item">Dev</div>
              </div>
              <div class="date">23 &rarr; 28 Jan 2018</div>
            </div>
        </section>
      <div class="nav-open-btn">
        <div class="nav-open-btn__bar"></div>
        <div class="nav-open-btn__bar"></div>
        <div class="nav-open-btn__bar"></div>
      </div>
    </div>
  </div>



  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script  src="js/index.js"></script>

  <script src="js/charming.min.js"></script>
		<script src="js/anime.min.js"></script>
		<script src="js/imagesloaded.pkgd.min.js"></script>
		<script src="js/demo.js"></script>
		<script src="js/glitchFx.js"></script>
		<script src="js/dil.js"></script>
		<script>
		{
			const slidesItems = Array.from(document.querySelectorAll('.slides > .slide'));
			const imgs = {even:[],odd:[]};
			slidesItems.forEach((item) => {
				imgs.even.push(item.dataset.imageEven);
				imgs.odd.push(item.dataset.imageOdd);
			});

			const dil = new DualImageLayout(document.querySelector('.slices'), {
				images: {even: imgs.even[0],odd: imgs.odd[0]},
				slices: 179,
				orientation: 'horizontal'
			});

			imagesLoaded(document.body, { background: true }, () => {	
				animateGridItems();
            });

			let isAnimating = true;
			let currentSlide = 0;
			const slidesNavItems = Array.from(document.querySelectorAll('.slides__nav > .slides__nav-item'));
			const changeLocation = (ev,pos) => {
				ev.preventDefault();
				if ( pos === currentSlide || isAnimating ) {
					return false;
				}

				ev.target.classList.add('slides__nav-item--current');
				slidesNavItems[currentSlide].classList.remove('slides__nav-item--current');
				
				animateGridItems(currentSlide,pos);
				currentSlide = pos;
				dil.switchImages(imgs.even[currentSlide],imgs.odd[currentSlide],true);
			};
			slidesNavItems.forEach((item, pos) => item.addEventListener('click', (ev) => changeLocation(ev,pos)));

			const gridItemsLetters = [];
			slidesItems.forEach((item) => {
				Array.from(item.querySelectorAll('.grid__item')).forEach((gridItem) => charming(gridItem));
				gridItemsLetters.push(Array.from(item.querySelectorAll('span')));
			});

			const animateGridItems = (currentSlide = -1, pos = 0) => {
				isAnimating = true;
				const newLettersFn = () => {
					const promises = [];
					for (lettersGroup of gridItemsLetters[pos]) {
						promises.push(anime({
							targets: lettersGroup,
							duration: 10,
							easing: 'linear',
							delay: (t,i) => anime.random(200,1000),
							opacity: [0,1],
							before: () => lettersGroup.style.opacity = 0
						}).finished);
					}
					Promise.all(promises).then(()=> isAnimating = false);
				};

				if ( currentSlide !== -1 ) {
					const promises = [];
					for (lettersGroup of gridItemsLetters[currentSlide]) {
						promises.push(anime({
							targets: lettersGroup,
							duration: 10,
							easing: 'linear',
							delay: (t,i) => anime.random(200,1000),
							opacity: 0,
							before: () => lettersGroup.style.opacity = 1
						}).finished);
					}
					Promise.all(promises).then(()=> newLettersFn());
				}
				else {
					newLettersFn();
				}
			};

			const glitchText = document.querySelector('.date');
			charming(glitchText);
			Array.from(glitchText.querySelectorAll('span')).forEach(letter => {
				letter.style.opacity = 1;
				new GlitchFx(letter).glitch();
			});
		}
		</script>
	</body>

</body>

</html>
